# uCss Documentation

[‚Üê Back to Overview](../) | **Documentation Hub** | [Base](./lib/base/) | [Layout](./lib/layout/) | [Typography](./lib/typography/) | [Components](./lib/components/) | [Theming](./lib/theming/) | [Utilities](./lib/utilities/) | [Config](./lib/config/)

---

## üìñ Architecture & Developer Guide

Welcome to the **uCss Technical Hub**. While the [Overview](../) introduces *what* uCss is, this document explains *how* it works and *why* it is built this way. This guide is intended for developers who want to understand the framework's internal logic, customize it deeply, or contribute to its source.

### The Philosophy: "Context is Everything"
Most CSS frameworks rely on **Media Queries** (screen size) to determine layout. uCss relies on **Container Queries** (context size).
*   **Old Way**: "If the screen is 768px wide, make this card 50% width."
*   **uCss Way**: "If I am inside a sidebar (small container), stack vertical. If I am in a main content area (wide container), go horizontal."

This shift makes components **truly portable**. You can place a Card, a Form, or a Grid anywhere‚Äîin a modal, a sidebar, or a hero section‚Äîand it will adapt to its *immediate parent* without you writing a single extra line of CSS.

---

## üèóÔ∏è Core Pillars

### 1. Variables as the Public API
In uCss, CSS Variables (Custom Properties) are not just for colors; they are the **primary interface** for controlling the framework.

*   **Global Scope (`root.css`)**: Defines the defaults.
    ```css
    :root { --p: hsl(43 100% 50%); /* Global Primary */ }
    ```
*   **Component Scope**: Components read these globals but can be overridden locally.
    ```css
    .btn { background: var(--btn-bg, var(--p)); }
    ```
*   **Cascade Injection**: You can theme a specific section by redefining variables on a parent.
    ```html
    <div style="--p: blue;">
       <button class="btn primary">I am Blue</button>
    </div>
    ```

### 2. The "Smart" Cascade
We organize our CSS to leverage the natural cascade rather than fighting it with `!important` or high specificity.
1.  **Config**: Sets the baseline.
2.  **Base**: Resets browser/cms quirks.
3.  **Layout**: Establishes the flow (Grid/Flex).
4.  **Components**: Adds visual style.
5.  **Utilities**: Overrides specific properties (highest specificity in practice due to proximity/class chaining).

### 3. Logical Properties
uCss is **Internationalization-Ready** out of the box. We strictly use [CSS Logical Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties).
*   Left/Right ‚Üí `inline-start` / `inline-end`
*   Top/Bottom ‚Üí `block-start` / `block-end`
*   Width/Height ‚Üí `inline-size` / `block-size`

This means if you switch `dir="rtl"` on the `<html>` tag, the entire layout (margins, paddings, text-aligns, borders) flips automatically.

---

## üìÇ Source Map

The `src/` directory represents the **Development Environment**.

```text
src/
‚îú‚îÄ‚îÄ README.md           # This Architecture Guide
‚îú‚îÄ‚îÄ u.css               # The Manifest (orchestrates imports)
‚îî‚îÄ‚îÄ lib/                # The Modular Source Code
    ‚îú‚îÄ‚îÄ config/         # THE BRAIN: Design tokens, colors, scales
    ‚îú‚îÄ‚îÄ base/           # THE FOUNDATION: Resets & Normalizers
    ‚îú‚îÄ‚îÄ layout/         # THE SKELETON: Grid, Flex, Section
    ‚îú‚îÄ‚îÄ typography/     # THE VOICE: Fluid type scales
    ‚îú‚îÄ‚îÄ components/     # THE BODY: UI Elements (Cards, Buttons)
    ‚îú‚îÄ‚îÄ theming/        # THE SKIN: Contextual themes, overlays
    ‚îî‚îÄ‚îÄ utilities/      # THE TOOLS: Spacing helpers
```

### `src` vs `dist`
*   **`src/`**: Contains raw source files with heavy comments and individual `@import` statements.
*   **`dist/`**: Generated by the build system.
    *   **Bundle**: All imports resolved into flat files.
    *   **Clean**: Comments removed, nesting flattened (optional).
    *   **Min**: Compressed for production.
    *   **Gzip/Brotli**: Pre-compressed versions for high-performance serving.

---

## üì¶ Module Reference

### [Config](./lib/config/) (`root.css`)
The single source of truth. Contains **Design Tokens** for:
*   **Palette**: `--p` (Primary), `--a` (Accent), `--bg`, `--srf`.
*   **Typography**: `--t-fs-*` (Heading sizes), `--tx-fs-*` (Body sizes).
*   **Layout**: `--sc-max-w` (Max width), `--gap`.

### [Base](./lib/base/)
*   **`clear.css`**: Surgical reset. Removes default margins but creates the `.cs` (Content Spacing) class to re-introduce them for blog/article content.

### [Layout](./lib/layout/)
*   **`section.css` (`.s`)**: The root container. Handles responsive padding and max-width constraints (`1366px` default).
*   **`grid.css` (`.g`)**: Auto-fit grids using `minmax()`. No "12 column" mental overhead unless you strictly need it.
*   **`flex.css` (`.f`)**: Modern flexbox utilities with variable-based keys.

### [Typography](./lib/typography/)
*   **`title.css` (`.t`)**: Fluid headings. Scales from mobile to desktop using `clamp()`.
*   **`text.css` (`.tx`)**: Body copy with optimal line-heights.

### [Components](./lib/components/)
*   **`card.css` (`.crd`)**: The "do everything" box. Composite architecture (`media`, `content`, `header`, `body`, `footer`).
*   **`button.css` (`.btn`)**: Interaction elements.
*   **`media.css` (`.med`)**: Aspect-ratio keepers.
*   **`link.css` (`.lnk`)**: The "Clickable Card" pattern solver.

### [Theming](./lib/theming/)
*   **`set.css` (`.set`)**: Contextual scopes. `.set.dark` inverts colors for that section and all its children.
*   **`overlay.css` (`.o`)**: Absolute positioning for background images/gradients.

### [Utilities](./lib/utilities/)
*   **`margin` (`.mg`)** / **`padding` (`.pd`)**: Spacing helpers using logical properties.
*   **`radius` (`.rad`)**: Consistent corner rounding.

---

## üõ†Ô∏è Maintainer Workflow

If you are contributing to uCss, here is how the magic happens.

### 1. The Build System
We use a **Node.js-based build system** (`scripts/build.js`) instead of a complex bundler like Webpack or Vite. Why? Because we only output CSS.
*   **Bundling**: Recursively resolves `@import` matching `src/lib`.
*   **Minification**: Regex-based optimized stripper. simpler and faster than cssnano for this specific architecture.
*   **Documentation**: Generates this static site from the Markdown files.

### 2. Commands
*   **`npm run build`**: Builds `src/` -> `dist/stable/` (or `latest` depending on branch).
*   **`./build.sh`**: Legacy shell wrapper (optional).

### 3. Release Channels
*   **Stable (`/stable/`)**: Production-ready. Use this for live sites. Automatically deployed from `main`.
*   **Latest (`/latest/`)**: Testing/Beta. Automatically deployed from `dev`.

---

## üöÄ Integration Snippets

For production usage, use the **Stable** channel.

### Full Framework
```html
<link rel="stylesheet" href="https://ucss.unqa.dev/stable/u.min.css">
<!-- Optional: Config Override -->
<link rel="stylesheet" href="https://ucss.unqa.dev/stable/lib/config/root.css">
```

### Optimization Tip (Preconnect)
Speed up connection time to our CDN:
```html
<link rel="preconnect" href="https://ucss.unqa.dev">
```

### Module-Only Import
If you *only* want the Grid system:
```html
<link rel="stylesheet" href="https://ucss.unqa.dev/stable/lib/layout/grid.min.css">
```
