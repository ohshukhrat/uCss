/**
 * @file Content Controller (formerly Reset)
 * @description Controls the global spacing variables defined in config/root.css.
 * 
 * Logic:
 * .cs (Content Spacing / App Mode): Sets all flow variables to 0. Use strictly for layout.
 * .csc (Content Spacing Child / Content Mode): Restores flow variables. Use for prose.
 * .cl (Clear List): Removes list styling.
 */

/**
 * @group Content Spacing (.cs) / App Mode
 * Disables all vertical rhythm.
 */
.cs {
    /* Kill Flow Variables */
    --flow--xl: 0;
    --flow--l: 0;
    --flow--m: 0;
    --flow--s: 0;
    --flow--xs: 0;

    /* Kill Element Mappings */
    --p-flow: 0;
    --list-flow: 0;
    --li-flow: 0;
    --t-flow-s: 0;
    --t-flow-e: 0;

    /* Force Reset for stubborn agents */
    /* Note: We rely on variables in html.css, but this ensures hard resets */
    :where(h1, h2, h3, h4, h5, h6, p, ul, ol, li, dl, dt, dd, blockquote, figure, pre, code, kbd, samp, table) {
        margin-block: 0;
    }

    /* Form Elements Reset */
    &.app :where(fieldset, legend) {
        margin: 0;
        padding: 0;
        border: 0;
    }

    /* List specific reset in App Mode */
    &.app :where(ul, ol) {
        list-style: none;
        padding: 0;
    }

    style {
        display: none;
    }
}

/**
 * @group Content Spacing Child (.csc) / Content Mode
 * Restores vertical rhythm.
 */
.csc {
    /* Restore Defaults (from root.css) */

    /* Primitives */
    --flow--xl: 1.25em;
    --flow--l: 1em;
    --flow--m: 0.75em;
    --flow--s: 0.5em;
    --flow--xs: 0.375em;

    /* Mappings */
    --p-flow: var(--flow--m, 0.75em);
    --list-flow: var(--flow--s, 0.5em);
    --li-flow: var(--flow--s, 0.5em);

    --t-flow-s: var(--flow--l, 1em);
    --t-flow-e: var(--flow--xs, 0.375em);
}

/* Allow nested resets again */
.csc .cs {
    --flow--xl: 0;
    --flow--l: 0;
    --flow--m: 0;
    --flow--s: 0;
    --flow--xs: 0;
    /* ...cascade will handle the rest via .cs selector spec... */
}

/**
 * @group Clear List (.cl)
 * Removes default list styling and margins.
 */
.cl:where(ul, ol) {
    list-style: var(--cl-list-style, none);
    padding-inline: var(--cl-pi, 0);
    margin-inline: var(--cl-mi, 0);
    margin-block: var(--cl-mb, 0);
    /* Integrate with new flow system */
    --list-flow: 0;
}

/**
 * @group Reset Defaults
 * Normalizes blockquotes, figures, and figcaptions.

 */

.cs blockquote:where(.cbq) {
    margin: 0;
    padding: 0;
    border: none;
}

.cs figure:where(.cfg) {
    display: var(--figure-d, block);
    margin: 0;
    padding: 0;
    border: none;
}

.cs figcaption:where(.cfc) {
    display: var(--figcaption-d, block);
    margin: 0;
    padding: 0;
    border: none;
    text-align: var(--figcaption-ta, start);
}

/**
 * @group Utilities
 * Helper classes for display control.
 */
.cnt {
    display: contents
}