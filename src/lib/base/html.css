/**
 * @file HTML Reset & Defaults
 * @description Global element normalization. 
 * Connects "naked" HTML tags to the design system variables defined in config.css.
 * * @usage
 * Load after config.css.
 * All selectors use :where() to maintain 0 specificity, allowing u.css classes to override easily.
 */

/* ==========================================================================
   1. GLOBAL RESET & BOX SIZING
   ========================================================================== */

:where(*),
:where(*::before),
:where(*::after) {
    box-sizing: border-box;
    background-repeat: no-repeat;
    /* Fix for flexbox/grid overflow issues */
    min-width: 0;
}

:where(html) {
    /* Respect user system preference for motion */
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
    tab-size: 4;
}

@media (prefers-reduced-motion: reduce) {
    :where(html) {
        scroll-behavior: auto;
    }
}

/* ==========================================================================
   2. BODY & ROOT DEFAULTS
   ========================================================================== */

:where(body) {
    /* Mapping: Uses --bg (Background) and --tx (Text) from config.css */
    background-color: var(--bg, #ffffff);
    color: var(--tx, #000000);

    /* Typography Defaults via config.css variables */
    font-family: var(--tx-font-fam, system-ui, -apple-system, sans-serif);
    font-size: var(--body-font-size, var(--body-fs, var(--tx-fs, var(--tx-fs--s, 1rem))));
    /* Default to medium fluid scale */
    line-height: var(--tx-lh, 1.5);
    font-weight: var(--tx-fw, 400);

    margin: 0;
    padding: 0;

    /* Smooth font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ==========================================================================
   3. TYPOGRAPHY
   ========================================================================== */

/* Headings: Map to --t (Title) variables */
:where(h1, h2, h3, h4, h5, h6) {
    color: var(--t, currentColor);
    font-family: var(--t-font-fam, inherit);
    font-weight: var(--t-fw--m, 700);
    line-height: var(--t-lh, 1.1);
    margin-block-start: 1.5em;
    margin-block-end: 0.5em;
    /* Modern nicer wrapping */
    text-wrap: balance;
}

/* Specific Sizes mapping to your fluid scale in config.css */
:where(h1) {
    font-size: var(--heading-font-size, var(--h-fs, var(--h-fs--m, var(--t-fs, var(--t-fs--m, 3rem)))));
}

:where(h2) {
    font-size: var(--heading-font-size, var(--h-fs, var(--h-fs--s, var(--t-fs, var(--t-fs--s, 2.625rem)))));
}

:where(h3) {
    font-size: var(--heading-font-size, var(--h-fs, var(--h-fs--xs, var(--t-fs, var(--t-fs--xs, 2.25rem)))));
}

:where(h4) {
    font-size: var(--heading-font-size, var(--h-fs, var(--h-fs--xxs, var(--t-fs, var(--t-fs--xxs, 2rem)))));
}

:where(h5) {
    font-size: var(--heading-font-size, var(--h-fs, var(--h-fs--xxxs, var(--t-fs, var(--t-fs--xxxs, 1.75rem)))));
}

:where(h6) {
    font-size: var(--heading-font-size, var(--h-fs, var(--h-fs--xxl, var(--t-fs, var(--t-fs--xxl, 1.625rem)))));
}

/* Paragraphs & Text */
:where(p) {
    margin-block-start: 0;
    margin-block-end: var(--flow-spacing, 1em);
    max-width: var(--flow-max-width, 65ch);
    /* Optimal reading length */
}

:where(small) {
    font-size: 0.875em;
}

:where(b, strong) {
    font-weight: 700;
    color: var(--t, currentColor);
    /* Bold text subtly darker/bolder color */
}

/* Links: Map to --p (Primary) and --a (Accent) */
:where(a) {
    color: var(--alt--bd, var(--p, #eec14c));
    text-decoration-skip-ink: auto;
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 0.2em;
    transition: color var(--trans-d, 0.2s) ease;
}

:where(a:hover) {
    color: var(--a, #eec14c);
}

/* Inline Code */
:where(code, kbd, samp) {
    font-family: var(--mono-font, "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace);
    font-size: 0.9em;
    padding: 0.1em 0.3em;
    border-radius: var(--rad-xs, 0.25em);
    background-color: var(--srf, #eee);
    /* Uses Surface color */
    color: var(--t, #000);
}

/* Preformatted blocks */
:where(pre) {
    background-color: var(--d, #222);
    /* Dark background */
    color: var(--l, #fff);
    /* Light text */
    padding: var(--gap, 1.5rem);
    border-radius: var(--rad, 0.5rem);
    overflow-x: auto;
    margin-block: 1.5em;
    font-family: var(--mono-font, monospace);
    font-size: 0.9em;
}

:where(hr) {
    border: none;
    border-block-start: 1px solid var(--out, #ccc);
    /* Uses Outline color */
    margin-block: 2.5rem;
}

:where(blockquote) {
    border-inline-start: calc(var(--border-width, .125rem) * 2) solid var(--p, currentColor);
    margin-inline: 0;
    padding-inline: 1.5em;
    padding-block: .5em;
    font-style: italic;
    color: var(--alt-bd, currentColor);
}

/* Selection Color */
::selection {
    background-color: var(--p, #eec14c);
    color: var(--on-p, #000);
}

/* ==========================================================================
   4. MEDIA
   ========================================================================== */

:where(img, picture, video, canvas, svg) {
    display: block;
    max-width: 100%;
    height: auto;
    font-style: italic;
    /* For alt text */
    shape-margin: 1rem;
}

/* Map specific media background to surface color to prevent jarring loads */
:where(img) {
    background-color: var(--srf, transparent);
}

/* ==========================================================================
   5. LISTS
   ========================================================================== */

:where(ul, ol) {
    padding-inline-start: 1.5em;
    margin-block: 1em;
}

:where(li) {
    margin-block-end: 0.5em;
}

/* Make markers inherit brand color */
:where(li::marker) {
    color: var(--p, currentColor);
    font-weight: bold;
}

/* ==========================================================================
   6. FORMS (THE MISSING PIECE)
   ========================================================================== */

/* Normalize inputs to inherit font styles */
:where(input, button, textarea, select) {
    font: inherit;
    color: inherit;
    letter-spacing: inherit;
}

/* Standard Input Styling */
:where(input:not([type="button"], [type="submit"], [type="reset"], [type="checkbox"], [type="radio"]), select, textarea) {
    display: block;
    width: 100%;
    padding: 0.625em 1em;

    /* Use Surface for background, Outline for border */
    background-color: var(--srf, #f5f5f5);
    border: 1px solid var(--out, #ccc);
    border-radius: calc(var(--rad, 0.25rem) / 4);

    color: var(--tx, #000);
    caret-color: var(--p, currentColor);
    /* Brand color cursor */

    transition: border-color var(--trans-d, 0.2s), box-shadow var(--trans-d, 0.2s);
}

/* Focus State using Brand Colors */
:where(input:focus, select:focus, textarea:focus) {
    outline: none;
    border-color: var(--p, #eec14c);
    box-shadow: 0 0 0 3px var(--op-lt, rgba(238, 193, 76, 0.3));
}

:where(textarea) {
    resize: vertical;
    min-height: 5em;
}

:where(label) {
    display: block;
    font-weight: 600;
    margin-block-end: 0.5em;
    color: var(--t, #000);
}

/* Checkboxes & Radios (Simple Accent) */
:where(input[type="checkbox"], input[type="radio"]) {
    accent-color: var(--p, #eec14c);
    width: 1.25em;
    height: 1.25em;
    vertical-align: middle;
    margin-inline-end: 0.5em;
    cursor: pointer;
}

/* ==========================================================================
   7. TABLES
   ========================================================================== */

:where(table) {
    width: 100%;
    border-collapse: collapse;
    margin-block: 1.5em;
    caption-side: bottom;
}

:where(th) {
    text-align: start;
    font-weight: 700;
    color: var(--t, #000);
    background-color: var(--srf, #eee);
    padding: 0.75em;
}

:where(td) {
    padding: 0.75em;
    border-bottom: 1px solid var(--out, #eee);
    color: var(--tx, #333);
}

:where(tr:hover td) {
    background-color: var(--srf, #fafafa);
    /* Subtle hover effect */
}

/* ==========================================================================
   8. UTILITIES (A11Y & Scroll)
   ========================================================================== */

/* Visually hidden but accessible */
:where(.sr-only) {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Themed Scrollbar */
:where(html)::-webkit-scrollbar {
    width: 10px;
}

:where(html)::-webkit-scrollbar-track {
    background: var(--srf, #eee);
}

:where(html)::-webkit-scrollbar-thumb {
    background-color: var(--out, #ccc);
    border-radius: calc(var(--rad, 0.25rem) * 2.5);
    border: 2px solid var(--srf, #eee);
}

:where(html)::-webkit-scrollbar-thumb:hover {
    background-color: var(--p, #eec14c);
}