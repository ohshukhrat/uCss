/**
 * @file Button Base
 * @description Core structural styles: inline-flex, centered content, cursor pointer.
 * Sets up basic font properties and transitions. Includes States (Hover/Focus).
 */

:where(.btn, [data-style="btn"]),
button.btn,
a.btn {
    /* --- Positioning --- */
    position: var(--btn-pos, relative);
    inset: var(--btn-inset);

    /* --- Base Layout --- */
    display: var(--btn-d, inline-flex);
    align-items: var(--btn-ai, center);
    justify-content: var(--btn-jc, center);
    gap: var(--btn-gap, 0.5em);
    flex-wrap: var(--btn-fw);

    order: var(--btn-order, var(--btn-o));

    /* --- Cursor & Text --- */
    cursor: var(--btn-cursor, pointer);
    text-decoration: var(--btn-tx-dec, none);

    /* --- Font & Text --- */
    font-family: var(--btn-font-f);
    /* Inherits by default */
    font-size: var(--btn-font-s, var(--btn-fs, 1.125rem));
    font-weight: var(--btn-font-w, var(--btn-fw, 600));
    line-height: var(--btn-line-h, var(--btn-lh, 1.5));
    text-transform: var(--btn-text-t, var(--btn-tt, none));
    white-space: var(--btn-white-s, var(--btn-ws, nowrap));

    /* --- Spacing --- */
    /* 'em'-based padding scales with font-size */
    padding: var(--btn-pd, var(--btn-pb, var(--btn-p, .625em)) var(--btn-pi, var(--btn-p, 1.325em)));
    margin: var(--btn-md, var(--btn-mb, var(--btn-m)) var(--btn-mi, var(--btn-m)));

    /* ~44px */

    /* --- Appearance (The API) --- */
    color: var(--btn-color, var(--btn-c, var(--on-p, var(--theme-palette-color-11, var(--theme-palette-color-3, var(--d, currentColor))))));
    background-color: var(--btn-background, var(--btn-bg, var(--p, var(--theme-palette-color-1, #eec14c))));
    opacity: var(--btn-opacity, var(--btn-op));

    border-width: var(--btn-border-w, var(--btn-bw, .125rem));
    border-style: var(--btn-border-s, var(--btn-bs, solid));
    border-color: var(--btn-border-c, var(--btn-bc, var(--btn-bg, var(--out-p, var(--theme-palette-color-1, #eec14c)))));
    border-radius: var(--btn-border-r, var(--btn-rad, var(--theme-button-border-radius, 4em)));

    box-shadow: var(--btn-shadow);

    /* --- Animation --- */
    transition: var(--btn-transition, var(--btn-trans, var(--trans-d, 0.32s) var(--trans-t, ease-in-out)));
    transition-property: var(--btn-transition-p, var(--btn-trans-p, background-color, border-color, color, opacity, transform));
    transform: var(--btn-transform, var(--btn-tf));

    /* --- Sizing --- */
    width: var(--btn-width, var(--btn-w--sm, var(--btn-w, fit-content)));
    inline-size: var(--btn-width, var(--btn-w--sm, var(--btn-w, fit-content)));
    min-block-size: var(--btn-min-height, var(--btn-min-h,
                calc(var(--btn-fs, 1.125rem) * var(--btn-lh, 1.5) + var(--btn-pb, var(--btn-p, .625em)) * 2 + var(--btn-border-w, var(--btn-bw, .125rem)) * 2)));

    &:where([data-size="full"], .full) {
        --btn-w: 100%;
    }

    @container (width < 669.99px) {
        &:where(.full--sm, .full--smd) {
            --btn-w--sm: 100%;
        }
    }

    @container (669.99px <=width <=999.99px) {
        width: var(--btn-w--md, var(--btn-w, fit-content));

        &:where(.full--md, .full--smd, .full--mdl) {
            --btn-w--md: 100%;
        }
    }

    @container (width > 999.99px) {
        width: var(--btn-w--lg, var(--btn-w, fit-content));

        &:where(.full--lg, .full--mdl) {
            --btn-w--lg: 100%;
        }
    }
}

/**
 * @group Icon Integration
 */
:where(.btn > .icn, .btn > svg, [data-style="btn"] > .icn, [data-style="btn"] > svg) {
    fill: var(--btn-icon-fill, var(--btn-icn-fill, var(--icn-fill, currentColor)));
    stroke: var(--btn-icon-stroke, var(--btn-icn-stroke, var(--icn-stroke)));
    inline-size: var(--btn-icon-w, var(--btn-icn-w, var(--btn-icn-size, var(--icn-size, 1.25em))));
    block-size: var(--btn-icon-h, var(--btn-icn-h, var(--btn-icn-size, var(--icn-size, 1.25em))));
    flex-shrink: var(--btn-icon-shrink, var(--btn-icn-shrink, 0));
    order: var(--btn-icon-o, var(--btn-icn-o, var(--icn-o)));

    transition: var(--btn-icon-trans, var(--btn-icn-trans, var(--btn-transition, var(--btn-trans, var(--trans-d, 0.32s) var(--trans-t, ease-in-out)))));
    transition-property: var(--btn-icon-trans-p, var(--btn-icn-trans-p, color, fill, stroke, height, width, inline-size, block-size));
}

:where(.btn.str > .icn, .btn.str > svg, .btn > .str, [data-style="btn"].str > svg, [data-style="btn"] > .str) {
    fill: var(--btn-icon-fill, var(--btn-icn-fill, var(--icn-fill)));
    stroke: var(--btn-icon-stroke, var(--btn-icn-stroke, var(--icn-stroke, currentColor)));
}

:where(svg.fill, .fill svg) {
    fill: var(--btn-icon-fill, var(--btn-icn-fill, var(--icn-fill, currentColor)));
}

:where(.btn.io1, [data-style="btn"].io1, .io1) {
    --icn-o: -3;
}

/**
 * @group States
 */

/* Hover */
:where(.btn:hover:not(:disabled, .is-disabled), [data-style="btn"]:hover:not(:disabled, .is-disabled)),
button.btn:hover:not(:disabled, .is-disabled),
a.btn:hover:not(:disabled, .is-disabled) {
    color: var(--btn-color-hover, var(--btn-c-hover, var(--on-a, var(--theme-palette-color-25, var(--theme-palette-color-11, var(--theme-palette-color-4, var(--d-bd, currentColor)))))));
    background-color: var(--btn-background-hover, var(--btn-bg-hover, var(--a, var(--theme-palette-color-2, #ffb900))));
    border-color: var(--btn-border-c-hover, var(--btn-bc-hover, var(--btn-background-hover, var(--btn-bg-hover, var(--out-a, var(--theme-palette-color-2, #ffb900))))));

    opacity: var(--btn-opacity-hover, var(--btn-op-hover));
    box-shadow: var(--btn-shadow-hover, var(--btn-shadow));

    /* Separate transition for hover allows different timing on hover vs. unhover */
    transition: var(--btn-transition-hover, var(--btn-trans-hover, var(--trans-d-hover, 0.16s) var(--trans-t, ease-in-out)));
    transform: var(--btn-transform-hover, var(--btn-tf-hover, translatey(var(--tf-translatey, -0.125em))));
}

:where(.btn:focus-visible, [data-style="btn"]:focus-visible),
button.btn:focus-visible,
a.btn:focus-visible {
    outline: var(--btn-outline, .25rem solid var(--btn-outline-c, var(--theme-palette-color-1, currentColor)));
    outline-offset: var(--btn-outline-offset, var(--btn-o-o, .125rem));

    box-shadow: var(--btn-shadow-hover, var(--btn-shadow));
    transform: var(--btn-transform-focus, var(--btn-transform-hover, var(--btn-tf-hover, translatey(var(--tf-translatey, -0.125em)))));
}

:where(.btn:active:not(:disabled, .is-disabled), [data-style="btn"]:active:not(:disabled, .is-disabled)),
button.btn:active:not(:disabled, .is-disabled),
a.btn:active:not(:disabled, .is-disabled) {
    transition: var(--btn-trans-active, 0.16s ease-in-out);
    transform: var(--btn-transform-active, var(--btn-tf-active, translatey(var(--tf-translatey-active, 0.0625em))));
}

:where(.btn:disabled, .btn.is-disabled, [data-style="btn"]:disabled, [data-style="btn"].is-disabled),
:is(button.btn:disabled, a.btn:disabled),
:where(.btn:disabled, .btn.is-disabled, [data-style="btn"]:disabled, [data-style="btn"].is-disabled):hover,
:is(button.btn:disabled, a.btn:disabled):hover {
    color: var(--btn-color-disabled, var(--btn-c-disabled, var(--btn-c, currentColor)));
    background-color: var(--btn-bg-disabled);
    border-color: var(--btn-border-c-disabled);
    opacity: var(--btn-opacity-disabled, 0.48);
    pointer-events: var(--btn-pointer-events-disabled, none);
    cursor: var(--btn-cursor-disabled, not-allowed);
}

:where(.btn.is-loading, [data-style="btn"].is-loading) {
    opacity: var(--btn-opacity-loading, 0.46);
    cursor: var(--btn-cursor-loading, wait);
}

:where(.btn.is-active, [data-style="btn"].is-active),
:is(button.btn.is-active, a.btn.is-active),
:where(.btn.is-active, [data-style="btn"].is-active):hover,
:is(button.btn.is-active, a.btn.is-active):hover {
    opacity: var(--btn-opacity-active, 1);
    transform: var(--btn-tf-active, translatey(var(--tf-translatey-active, 0)));
    cursor: var(--btn-cursor-active, default);
}