/**
 * @file Set Utilities (Theming Scopes)
 * @description Defines local theme scopes (.set) that override colors and backgrounds.
 * Enables nested theming (e.g., dark section within light page).
 * 
 * @usage
 * classes: .set, .set-primary, .set-dark, .set.light, etc.
 * variables: --set-bg, --set-color, --set-h (headings), --set-lnk (links), --set-tx (text), --set-t (titles), --set-st (subtitles)
 */

/**
 * @group Base Set
 * Establishes a new stacking context and applies theme variables.
 * Overrides headings and links to match the local theme.
 */
.set,
[class*="set--"] {
    color: var(--set-tx, var(--set-color, var(--tx, var(--theme-palette-color-3, currentColor))));
    background-image: var(--set-img, none);
    background-color: var(--set-bg, transparent);
    border-width: var(--set-border-w, 0);
    border-style: var(--set-border-s, solid);
    border-color: var(--set-border-c, currentColor);
    --theme-text-color: var(--set-tx, var(--set-color, var(--tx, var(--theme-palette-color-3, currentColor))));

    /* Heading Overrides */
    :where(h1, h2) {
        color: var(--set-t, var(--set-h, var(--set-color, var(--t, var(--theme-palette-color-4, currentColor)))));
        --theme-heading-color: var(--set-t, var(--set-h, var(--set-color, var(--t, var(--theme-palette-color-4, currentColor)))));
    }

    :where(h3, h4, h5, h6) {
        color: var(--set-st, var(--set-h, var(--set-color, var(--t, var(--theme-palette-color-4, currentColor)))));
        --theme-heading-color: var(--set-st, var(--set-h, var(--set-color, var(--t, var(--theme-palette-color-4, currentColor)))));
    }

    /* Link Overrides */
    :is(a):not(.btn, [data-style="btn"]) {
        color: var(--set-lnk, var(--set-st, var(--set-h, var(--set-color, var(--t, var(--theme-palette-color-4, currentColor))))));
        background-color: var(--set-lnk-bg);
        text-decoration: var(--set-lnk-dec, none);
        --theme-link-initial-color: var(--set-lnk, var(--set-st, var(--set-h, var(--set-color, var(--t, var(--theme-palette-color-4, currentColor))))));
        --theme-link-hover-color: var(--set-lnk-hover, var(--set-lnk, var(--p, var(--theme-palette-color-2))));
    }

    :is(a:hover):not(.btn, [data-style="btn"]) {
        color: var(--set-lnk-hover, var(--set-lnk, var(--p, var(--theme-palette-color-2))));
        background-color: var(--set-lnk-bg-hover, var(--set-lnk-bg));
    }

    /* Card Context */
    &:where(.crd) {
        --crd-bg: var(--set-bg);
        --crd-bg-hover: var(--set-bg-hover, var(--set-bg));
    }
}

/**
 * @group Theme Presets
 * Predefined color schemes.
 */

/* Primary Theme */
.set.primary,
.set-primary {
    --set-h: var(--theme-palette-color-4, hsl(0 0% 4%));
    --set-color: var(--tx, var(--theme-palette-color-3, hsl(0 0% 8%)));
    --set-bg: var(--sp, var(--theme-palette-color-8, hsl(43 83% 62% / .64)))
}

/* Secondary Theme */
.set.secondary,
.set-secondary {
    --set-h: var(--theme-palette-color-4, hsl(0 0% 4%));
    --set-color: var(--tx, var(--theme-palette-color-3, hsl(0 0% 8%)));
    --set-bg: var(--sa, var(--theme-palette-color-6, hsl(44 100% 50% / .64)))
}

/* Dark Theme (Inverted) */
.set.dark,
.set-dark {
    --set-t: var(--l-bd, var(--theme-palette-color-7, hsl(0 0% 100%)));
    --set-st: var(--l, var(--theme-palette-color-7, hsl(0 0% 96%)));
    --set-tx: var(--l, var(--theme-palette-color-6, hsl(0 0% 96%)));
    --set-bg: var(--d-bd, var(--theme-palette-color-4, hsl(0 0% 4%)));
}

/* Light Theme */
.set.light,
.set-light {
    --set-t: var(--d-bd, var(--theme-palette-color-4, hsl(0 0% 4%)));
    --set-st: var(--d-bd, var(--theme-palette-color-4, hsl(0 0% 4%)));
    --set-tx: var(--d, var(--theme-palette-color-3, hsl(0 0% 8%)));
    --set-bg: var(--l-bd, var(--theme-palette-color-7, hsl(0 0% 100%)));
}