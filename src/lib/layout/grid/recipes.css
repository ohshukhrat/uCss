/**
 * @file Grid Recipes
 * @description Smart snippets logic (.g, .sg, .sgc) allowing for grid customization.
 */

:where(.g) {
    &:where(.g-d, .dense) {
        --g-flow: dense;
    }

    &:where(.g-i, .inline) {
        display: inline-grid;
    }

    /* Horizontal Scroll / Carousel */
    &:where(.g-r, .g-row, .scroll, .carousel) {
        --g-flow: column;
        --g-t-cols: none;
        --g-a-cols: var(--g-r-col, 100%);

        overflow-x: var(--g-ofx, auto);
        overscroll-behavior-x: var(--g-ofbx, contain);
        scroll-snap-type: var(--g-sst, var(--g-sst-ax, x) var(--g-sst-ay, mandatory));

        scroll-padding-inline: var(--g-pd, var(--g-col-gap, var(--g-gap, clamp(1.75rem, 1.912vw + 1.368rem, 3rem))));

        scrollbar-width: var(--g-sb-width, none);
        scrollbar-color: var(--g-sb-color, transparent transparent);
    }

    &:where(.g-r, .g-row, .scroll, .carousel)::webkit-scrollbar {
        display: var(--g-sb-display, none);
    }

    &:where(.g-r, .g-row, .scroll, .carousel)> :where(*) {
        scroll-snap-align: var(--gc-align, start);
        width: var(--gc-w, 100%);
        max-width: var(--gc-max-w, none);
    }

    /* Masonry Layout */
    &:where(.g-m, .masonry) {
        /* Default column width for masonry */
        --g-cols: 16rem;

        grid-template-rows: masonry;

        /* Fallback for interaction */
        &>* {
            --g-gap: var(--g-m-gap);
            margin-block-end: var(--g-gap);
        }
    }
}

/* Fallback for browsers without Grid Masonry support */
@supports not (grid-template-rows: masonry) {
    :where(.g):where(.g-m, .masonry) {
        display: block;
        columns: var(--g-cols, 16rem);
        column-gap: var(--g-gap);

        &>* {
            break-inside: avoid;
            margin-bottom: var(--g-gap);
            display: inline-block;
            /* Fixes some column breaking issues */
            width: 100%;
        }
    }
}