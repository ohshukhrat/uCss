/**
 * @file Gutenberg Typography Adapter
 * @description Maps Gutenberg's native Custom Properties to uCss tokens.
 * Enables uCss to drive Gutenberg's typography engine.
 */

:root body {
    /* Titles: Scales (title.css) */
    --wp--preset--font-size--t-xxxl: var(--t-fs--xxxl, clamp(3.5rem, 2.294vw + 3.041rem, 5rem));
    --wp--preset--font-size--t-xxl: var(--t-fs--xxl, clamp(3.25rem, 1.912vw + 2.868rem, 4.5rem));
    --wp--preset--font-size--t-xl: var(--t-fs--xl, clamp(3rem, 1.53vw + 2.694rem, 4rem));
    --wp--preset--font-size--t-l: var(--t-fs--l, clamp(2.75rem, 1.53vw + 2.444rem, 3.75rem));
    --wp--preset--font-size--t-m: var(--t-fs--m, clamp(2.5rem, 1.53vw + 2.194rem, 3.5rem));
    --wp--preset--font-size--t-s: var(--t-fs--s, clamp(2.25rem, 1.147vw + 2.021rem, 3rem));
    --wp--preset--font-size--t-xs: var(--t-fs--xs, clamp(2rem, 0.765vw + 1.847rem, 2.5rem));
    --wp--preset--font-size--t-xxs: var(--t-fs--xxs, clamp(1.75rem, 0.765vw + 1.597rem, 2.25rem));
    --wp--preset--font-size--t-xxxs: var(--t-fs--xxxs, clamp(1.5rem, 0.765vw + 1.347rem, 2rem));

    /* Text: Scales (text.css) */
    --wp--preset--font-size--tx-xxl: var(--tx-fs--xxl, clamp(1.5rem, 0.382vw + 1.424rem, 1.75rem));
    --wp--preset--font-size--tx-xl: var(--tx-fs--xl, clamp(1.375rem, 0.191vw + 1.337rem, 1.5rem));
    --wp--preset--font-size--tx-l: var(--tx-fs--l, clamp(1.25rem, 0.191vw + 1.212rem, 1.375rem));
    --wp--preset--font-size--tx-m: var(--tx-fs--m, clamp(1.125rem, 0.191vw + 1.087rem, 1.25rem));
    --wp--preset--font-size--tx-s: var(--tx-fs--s, clamp(1rem, 0.191vw + 0.962rem, 1.125rem));
    --wp--preset--font-size--tx-xs: var(--tx-fs--xs, clamp(0.875rem, 0.191vw + 0.837rem, 1rem));
    --wp--preset--font-size--tx-xxs: var(--tx-fs--xxs, clamp(0.75rem, 0.191vw + 0.712rem, 0.875rem));
    --wp--preset--font-size--tx-xxxs: var(--tx-fs--xxxs, clamp(0.625rem, 0.191vw + 0.587rem, 0.75rem));
}

body {
    h1 {
        font-size: var(--heading-font-size, var(--h1-fs, var(--h-fs, var(--h-fs--xl, var(--t-fs, var(--t-fs--s, 2.625rem))))));
    }

    h2 {
        font-size: var(--heading-font-size, var(--h2-fs, var(--h-fs, var(--h-fs--l, var(--t-fs, var(--t-fs--xs, 2.25rem))))));
    }

    h3 {
        font-size: var(--heading-font-size, var(--h3-fs, var(--h-fs, var(--h-fs--m, var(--t-fs, var(--t-fs--xxs, 2rem))))));
    }

    h4 {
        font-size: var(--heading-font-size, var(--h4-fs, var(--h-fs, var(--h-fs--s, var(--t-fs, var(--t-fs--xxxs, 1.75rem))))));
    }

    h5 {
        font-size: var(--heading-font-size, var(--h5-fs, var(--h-fs, var(--h-fs--xs, var(--t-fs, var(--tx-fs--xxl, 1.625rem))))));
    }

    h6 {
        font-size: var(--heading-font-size, var(--h6-fs, var(--h-fs, var(--h-fs--xxs, var(--t-fs, var(--tx-fs--xl, 1.4375rem))))));
    }
}

/**
 * @file HTML Smart Flow
 * @description The vertical rhythm engine that manages spacing between flow elements.
 */

/* 1. Standard Flow (Paragraphs, Lists) */
:is(p, ul, ol, blockquote, figure, pre, table, form, image, video, iframe, canvas, div, a, h1, h2, h3, h4, h5, h6)+ :is(p, pre) {
    margin-top: var(--p-flow, .75em);
    margin-block-start: var(--p-flow, .75em);
    margin-bottom: var(--p-flow-e, 0);
    margin-block-end: var(--p-flow-e, 0);
}

:is(p, ul, ol, blockquote, figure, pre, table, form, image, video, iframe, canvas, div, a, h1, h2, h3, h4, h5, h6)+ :is(ul, ol, blockquote, figure, pre, table) {
    margin-top: var(--el-flow, .75em);
    margin-block-start: var(--el-flow, 1.25em);
    margin-bottom: var(--el-flow-e, 0);
    margin-block-end: var(--el-flow-e, 0);
}

/* 2. Heading Flow */
/* Space BEFORE headings (if not first child) */
:is(p, ul, ol, blockquote, figure, pre, table, form, image, video, iframe, canvas, div, a, h1, h2, h3, h4, h5, h6)+ :is(h1, h2, h3, h4, h5, h6) {
    margin-top: var(--t-flow-s, .75em);
    margin-block-start: var(--t-flow-s, 1em);
}

/* Space AFTER headings (connecting to text, or subtitle) */
:is(h1, h2, h3, h4, h5, h6):not(:last-child) {
    margin-bottom: var(--t-flow-e, .375em);
    margin-block-end: var(--t-flow-e, .375em);
}

/* 3. List Item Flow */
:is(li, a, div)+ :is(li) {
    margin-top: var(--li-flow, .5em);
    margin-block-start: var(--li-flow, .5em);
    margin-bottom: var(--li-flow-e, 0);
    margin-block-end: var(--li-flow-e, 0);
}

:is(li, li > *)+ :is(ul, ol) {
    margin-top: var(--li-flow, .5em);
    margin-block-start: var(--li-flow, .5em);
    margin-bottom: var(--li-flow-e, 0);
    margin-block-end: var(--li-flow-e, 0);
}

/* 4. Button/Link After Flow */
:is(p)+ :is(a, button, .btn) {
    margin-top: var(--p-flow, .75em);
    margin-block-start: var(--p-flow, .75em);
    margin-bottom: var(--p-flow-e, 0);
    margin-block-end: var(--p-flow-e, 0);
}

/* 5. Table Inner Flow */
:is(div)> :is(table:only-child) {
    margin-top: var(--p-flow, .75em);
    margin-block-start: var(--p-flow, .75em);
    margin-bottom: var(--p-flow-e, 0);
    margin-block-end: var(--p-flow-e, 0);
}